/* eslint-disable react/prefer-stateless-function  */
import React, { Component, PropTypes as PT } from 'react';
import { guid } from 'nav-frontend-js-utils';
import classNames from 'classnames';

class Input extends Component {
    render() {
        const { label, disabled, bredde, feil, id, name } = this.props;

        const inputId = id || name || guid();
        const inputClass = (width) => classNames('skjemaelement__input', `input--${width}`);
        const skjemaElementClass = (harFeil) => classNames('skjemaelement', { harFeil });
        return (
            <div className={skjemaElementClass(feil)}>
                <label className="skjemaelement__label" htmlFor={inputId}>{label}</label>
                <input disabled={disabled} type="text" className={inputClass(bredde)} id={inputId} />
                {feil ?
                    <div role="alert" aria-live="assertive" className="skjemaelement__feilmelding">
                        {feil.feilmelding}
                    </div>
                    : null
                }
            </div>
        );
    }
}

Input.defaultProps = {
    bredde: 'fullbredde',
    disabled: false,
    feil: undefined,
    id: undefined,
    name: undefined
};

Input.propTypes = {
    label: PT.node.isRequired,
    feil: PT.shape({
        feilmelding: PT.node.isRequired
    }),
    bredde: PT.oneOf['fullbredde', 'xxl', 'xl', 'l', 'm', 's', 'xs', 'xxs'], // eslint-disable-line no-sequences
    disabled: PT.bool,
    id: PT.string,
    name: PT.string
};

export default Input;

