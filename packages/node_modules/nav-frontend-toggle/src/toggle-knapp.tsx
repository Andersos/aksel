import * as React from 'react';
import * as cn from 'classnames';

import { omit } from 'nav-frontend-js-utils';
import ToggleKnappPure, { ToggleKnappPureProps } from './toggle-knapp-pure';

export interface ToggleKnappState {
    pressed: boolean
}

class ToggleKnapp extends React.Component<ToggleKnappPureProps, ToggleKnappState> {
    static defaultProps: ToggleKnappPureProps = {
        pressed: false
    };

    constructor(props){
        super(props);
        this.state = {
            pressed: props.pressed
        };
    }

    handleClick = (e) => {
        this.setState({
            pressed: !this.state.pressed
        });

        if (this.props.onClick) this.props.onClick(e);
    }

    render(){
        const renderProps = omit(this.props, 'children', 'pressed');
        return (
            <ToggleKnappPure
                onClick={this.handleClick}
                pressed={this.state.pressed}
                {...renderProps}
            >
                {this.props.children}
            </ToggleKnappPure>
        );
    }
}

export default ToggleKnapp;