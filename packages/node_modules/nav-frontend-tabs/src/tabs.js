import React from 'react';
import ReactDOM from 'react-dom';
import PT from 'prop-types';
import cn from 'classnames';
import { guid, omit } from 'nav-frontend-js-utils';

import 'nav-frontend-tabs-style';

const tabsCls = (props) => cn('nav-frontend-tabs', props.className, {
    'nav-frontend-tabs--kompakt': props.kompakt
});

const tabCls = (props) => cn('nav-frontend-tabs__tab-inner', {
    'nav-frontend-tabs__tab-inner--aktiv': props.aktiv,
    'nav-frontend-tabs__tab-inner--interaktiv': !props.aktiv,
});

class Tab extends React.Component {
    getLabelContent() {
        return (
            <div className="nav-frontend-tabs__tab-label">
                {this.props.labelContent}
            </div>
        );
    }

    getInnerTab() {
        if (!this.props.aktiv) {
            return (
                <button
                    className={tabCls(this.props)}
                    onClick={this.props.onClick}
                >
                    {this.getLabelContent()}
                </button>
            );
        } else {
            return (
                <div className={tabCls(this.props)}>
                    {this.getLabelContent()}
                </div>
            );
        }
    }
    render(){
        return (
            <li className="nav-frontend-tabs__tab-outer">
                {this.getInnerTab()}
            </li>
        );
    }
}

class NavFrontendTabs extends React.Component {
    render() {
        const domProps = omit(this.props,
            'children',
            'className',
            'tabs',
            'aktivTab',
            'onClick',
            'ferdig',
            'kompakt'
        );

        return (
            <div className={tabsCls(this.props)} {...domProps}>
                <ul className="nav-frontend-tabs__tab-list">
                    {
                        this.props.tabs.map((tab, i) => {
                            return (
                                <Tab
                                    key={guid()}
                                    labelContent={tab}
                                    aktiv={(this.props.aktivTab === (i + 1))}
                                    onClick={(e) => this.props.onClick(e, (i + 1))}
                                />
                            );
                        })
                    }
                </ul>
            </div>
        );
    }
}

NavFrontendTabs.propTypes = {
    children: PT.node
};

export default NavFrontendTabs;
