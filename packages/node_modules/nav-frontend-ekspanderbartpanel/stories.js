/* eslint-disable react/prop-types */
import React from 'react';
import { storiesOf, action } from '@kadira/storybook';
import Collapsable from 'react-storybook-addon-sections/dist/components/groupings/collapsable';
import Tabbable from 'react-storybook-addon-sections/dist/components/groupings/tabbable';
import Inline from 'react-storybook-addon-sections/dist/components/groupings/inline';
import ReactView from 'react-storybook-addon-sections/dist/components/sections/reactview';
import HtmlView from 'react-storybook-addon-sections/dist/components/sections/htmlview';
import CssView from 'react-storybook-addon-sections/dist/components/sections/cssview';
import ReactMarkdown from 'react-markdown';
import EkspanderbartPanel from './src/index';
import source from './README.md';

const renderers = {
    Heading: ({ level, nodeKey, ...props }) => {
        if (level === 1) {
            return null;
        }

        return React.createElement(`h${level + 1}`, { ...props, key: nodeKey });
    }
};

function ReadmeView(src) {
    console.log('src', src);

    return {
        title: 'Readme',
        element: () => <ReactMarkdown renderers={renderers} source={src} />
    };
}

storiesOf('Paneler', module)
    .addWithSections('Test sections', () => (
        <div style={{ padding: '1rem', backgroundColor: '#efefef' }}>
            <EkspanderbartPanel tittel="Test" onClick={action('ekspander')}>
                Dette er ett expandpanel
            </EkspanderbartPanel>
        </div>
    ), Inline(ReadmeView(source)), Tabbable(ReactView, HtmlView), Collapsable(CssView))
    .add('Ekspanderbart panel', () => (
        <div style={{ padding: '1rem', backgroundColor: '#efefef' }}>
            <EkspanderbartPanel tittel="Test" onClick={action('ekspander')}>
                Dette er ett expandpanel
            </EkspanderbartPanel>
        </div>
    ));
