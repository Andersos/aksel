import PT from 'prop-types';
import { Component } from 'react';

export class EventThrottler extends Component { // eslint-disable-line import/prefer-default-export
    componentDidMount() {
        window.addEventListener(
            'resize',
            (...args) => this.props.callback.apply(args, this.props.context),
            false
        );
    }

    componentWillUnmount() {
        window.removeEventListener(
            'resize',
            (...args) => this.props.callback.apply(args, this.props.context)
        );
    }

    render() {
        return this.props.component;
    }
}

EventThrottler.propTypes = {
    component: PT.shape.isRequired,
    context: PT.shape.isRequired,
    callback: PT.func,
    delay: PT.number
};

EventThrottler.defaultProps = {
    callback: () => {},
    delay: 0
};