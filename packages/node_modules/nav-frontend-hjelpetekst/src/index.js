import React, { Component, PropTypes as PT } from 'react';
import classNames from 'classnames';
import 'nav-frontend-hjelpetekst-style';// eslint-disable-line import/extensions

const cls = (type, className) => classNames('hjelpetekst', className, {
    hjelpetekst__under: type === 'under',
    hjelpetekst__over: type === 'over',
    hjelpetekst__hojre: type === 'hojre',
    hjelpetekst__venstre: type === 'venstre'
});

class HjelpetekstBase extends Component {
    constructor(props) {
        super(props);
        this.toggleSynlighet = this.toggleSynlighet.bind(this);
        this.state = {
            erSynlig: false
        };
    }

    toggleSynlighet() {
        event.preventDefault();
        this.setState({
            erSynlig: !this.state.erSynlig
        });
    }

    renderContent() {
        return (
            <span className={cls(this.props.type, classNames)}>{this.props.children}
                <button className="hjelpetekst__stangknapp" onClick={this.toggleSynlighet}>
                    <span aria-label="lukk hjelpetekst"/>
                </button>
            </span>
        );
    }
    render() {
        const Hjelpetekst = this.state.erSynlig ? this.renderContent() : null;
        return (
            <div className="hjelpetekst__container">
                <button className="hjelpetekst__opneknapp" onClick={this.toggleSynlighet} title={this.props.tittel}>
                    <span aria-hidden="true" aria-label="opne hjelpetekst">?</span>
                </button>
                {Hjelpetekst}
            </div>
        );
    }
}

HjelpetekstBase.propTypes = {
    children: PT.node.isRequired,
    type: PT.oneOf(['over', 'under', 'hojre', 'venstre']).isRequired,
    tittel: PT.string
};

HjelpetekstBase.defaultProps = {
    tittel: 'Hjelptekst',
    className: undefined

};

export default HjelpetekstBase;

export const HjelpetekstOver = (props) => <HjelpetekstBase type="over" {...props} />;
export const HjelpetekstUnder = (props) => <HjelpetekstBase type="under" {...props} />;
export const HjelpetekstHojre = (props) => <HjelpetekstBase type="hojre" {...props} />;
export const HjelpetekstVenstre = (props) => <HjelpetekstBase type="venstre" {...props} />;
